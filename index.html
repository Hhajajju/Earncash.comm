<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earncash</title>
    <style>
        /* Existing CSS styles */
        /* Your styles go here */
    </style>
</head>
<body>
    <div class="container">
        <!-- Your existing HTML structure -->
        <div id="main" class="dashboard">
            <header>
                <div class="logo">Earncash</div>
                <div class="user-menu">
                    <div class="menu-icon" onclick="toggleMenu()">â‰¡</div>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <a href="javascript:void(0);" id="profile-link">Profile</a>
                        <a href="javascript:void(0);" id="earnings-link">Earnings</a>
                        <a href="javascript:void(0);" id="referral-link">Referral</a>
                        <a href="javascript:void(0);" id="withdrawal-link">Withdrawal</a>
                        <a href="javascript:void(0);" id="customer-care-link">Customer Care</a>
                        <a href="javascript:void(0);" id="about-us-link">About Us</a>
                        <a href="javascript:void(0);" id="settings-link">Settings</a>
                        <a href="javascript:void(0);" id="logout-button">Logout</a>
                    </div>
                </div>
            </header>
            <main>
                <h1>Welcome to your dashboard!</h1>
                <div class="earnings">
                    <h2>Your Earnings</h2>
                    <p id="earnings-amount">$0.000</p>
                </div>
            </main>
        </div>
    </div>

    <script>
        // JavaScript Code for Earncash Application

        // User Data Storage (In-memory for demo purposes)
        const users = {};
        let currentUser = null;
        let userEarnings = 0;
        let referralEarnings = 0;

        // Track withdrawals
        const withdrawalHistory = [];

        // Function to toggle visibility of different sections
        function showSection(sectionId) {
            const sections = [
                'registration', 'login', 'forgot-password', 'main',
                'profile', 'referral', 'earnings-section', 'withdrawal',
                'customer-care', 'settings', 'about-us'
            ];
            sections.forEach(section => {
                document.getElementById(section).style.display = (section === sectionId) ? 'block' : 'none';
            });
        }

        // Event Listeners for navigation
        document.getElementById('to-login').addEventListener('click', () => showSection('login'));
        document.getElementById('to-register').addEventListener('click', () => showSection('registration'));
        document.getElementById('forgot-password-link').addEventListener('click', () => showSection('forgot-password'));
        document.getElementById('back-to-login').addEventListener('click', () => showSection('login'));
        document.getElementById('back-to-main-profile').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-referral').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-earnings').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-withdrawal').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-customer-care').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-settings').addEventListener('click', () => showSection('main'));
        document.getElementById('back-to-main-about').addEventListener('click', () => showSection('main'));

        // Logout Event Listener
        document.getElementById('logout-button').addEventListener('click', () => {
            currentUser = null;
            userEarnings = 0;
            showSection('login');
        });

        // Register Event Listener
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = this[0].value.trim();
            const email = this[1].value.trim();
            const password = this[2].value.trim();

            if (users[email] || Object.values(users).some(user => user.username === username)) {
                alert("User already registered with this email or username.");
                return;
            }

            if (!validateEmail(email)) {
                alert("Invalid email address.");
                return;
            }

            // Register User
            const userId = generateUniqueUserId();
            users[email] = { username, email, password, earnings: 0, referralLink: generateReferralLink(email), referrals: [], userId };
            alert("Registration successful! You can now login.");
            showSection('login');
        });

        // Login Event Listener
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this[0].value.trim();
            const password = this[1].value.trim();

            if (!users[email]) {
                alert("Email not registered.");
                return;
            }

            if (users[email].password !== password) {
                alert("Incorrect password.");
                return;
            }

            // Set current user and show main dashboard
            currentUser = users[email];
            userEarnings = currentUser.earnings;
            showDashboard();
        });

        // Show dashboard after login
        function showDashboard() {
            document.getElementById('earnings-amount').textContent = `$${userEarnings.toFixed(3)}`;
            document.getElementById('profile-username').textContent = currentUser.username;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-id').textContent = currentUser.userId;
            showSection('main');
        }

        // Function to toggle menu visibility
        function toggleMenu() {
            const menu = document.getElementById('dropdown-menu');
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
        }

        // Menu Section Navigation
        document.getElementById('profile-link').addEventListener('click', () => showSection('profile'));
        document.getElementById('earnings-link').addEventListener('click', () => showSection('earnings-section'));
        document.getElementById('referral-link').addEventListener('click', () => showSection('referral'));
        document.getElementById('withdrawal-link').addEventListener('click', () => showSection('withdrawal'));
        document.getElementById('customer-care-link').addEventListener('click', () => showSection('customer-care'));
        document.getElementById('settings-link').addEventListener('click', () => showSection('settings'));
        document.getElementById('about-us-link').addEventListener('click', () => showSection('about-us'));

        // Sample referral tracking (This would be triggered appropriately in real use)
        trackReferral('example@example.com'); // Example call to simulate a referral
    </script>
</body>
</html>
